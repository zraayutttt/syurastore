<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SYURASTORE - Digital Pro List</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;600;800&display=swap');
        :root { --primary-color: #eab308; }
        body { font-family: 'Plus Jakarta Sans', sans-serif; background-color: #0f172a; color: #f8fafc; scroll-behavior: smooth; }
        .text-primary { color: var(--primary-color); }
        .bg-primary { background-color: var(--primary-color); }
        .glass-card { background: rgba(30, 41, 59, 0.7); backdrop-filter: blur(10px); border: 1px solid rgba(255, 255, 255, 0.1); transition: 0.3s; }
        .glass-card:hover { transform: translateY(-8px); border-color: var(--primary-color); box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.5); }
        .tab-active { background-color: var(--primary-color) !important; color: #0f172a !important; font-weight: bold; }
        .status-ready { background: #16a34a; color: white; padding: 2px 10px; border-radius: 20px; font-size: 10px; font-weight: bold; }
        .status-kosong { background: #dc2626; color: white; padding: 2px 10px; border-radius: 20px; font-size: 10px; font-weight: bold; }
        .no-scrollbar::-webkit-scrollbar { display: none; }
    </style>
</head>
<body class="antialiased">

    <nav class="sticky top-0 z-40 bg-slate-900/80 backdrop-blur-md border-b border-slate-800 p-6">
        <div class="flex justify-between items-center max-w-6xl mx-auto">
            <div class="text-2xl font-extrabold tracking-tighter text-primary uppercase">SYURA<span class="text-white">STORE</span></div>
            <div id="loadingStatus" class="text-xs text-slate-500 animate-pulse">Menghubungkan Server...</div>
        </div>
    </nav>

    <div class="container mx-auto px-4 py-12">
        <header class="text-center mb-12">
            <h1 class="text-5xl font-extrabold mb-4 italic">Pilih <span class="text-primary">Layanan</span></h1>
            <p class="text-slate-400">Akses premium instan dengan proses yang rapi dan otomatis.</p>
        </header>

        <div class="max-w-6xl mx-auto mb-10 space-y-4">
            <input type="text" id="searchInput" onkeyup="filterProducts()" placeholder="Cari layanan (YouTube, Netflix...)" 
                class="w-full p-4 rounded-2xl bg-slate-800 border border-slate-700 outline-none focus:border-primary text-white transition-all">
            
            <div id="categoryTabs" class="flex gap-2 overflow-x-auto pb-2 no-scrollbar">
                <button onclick="setCategory('All')" class="tab-btn px-6 py-2 rounded-full border border-slate-700 text-sm whitespace-nowrap bg-slate-800 tab-active">Semua</button>
                <button onclick="setCategory('PaketData')" class="tab-btn px-6 py-2 rounded-full border border-slate-700 text-sm whitespace-nowrap bg-slate-800">PaketData</button>
                <button onclick="setCategory('YouTube')" class="tab-btn px-6 py-2 rounded-full border border-slate-700 text-sm whitespace-nowrap bg-slate-800">YouTube</button>
                <button onclick="setCategory('AM')" class="tab-btn px-6 py-2 rounded-full border border-slate-700 text-sm whitespace-nowrap bg-slate-800">AM</button>
                <button onclick="setCategory('Netflix')" class="tab-btn px-6 py-2 rounded-full border border-slate-700 text-sm whitespace-nowrap bg-slate-800">Netflix</button>
		<button onclick="setCategory('GoogleOne')" class="tab-btn px-6 py-2 rounded-full border border-slate-700 text-sm whitespace-nowrap bg-slate-800">GoogleOne</button>
                <button onclick="setCategory('Vidio')" class="tab-btn px-6 py-2 rounded-full border border-slate-700 text-sm whitespace-nowrap bg-slate-800">Vidio</button>
                <button onclick="setCategory('Disney')" class="tab-btn px-6 py-2 rounded-full border border-slate-700 text-sm whitespace-nowrap bg-slate-800">Disney</button>
                <button onclick="setCategory('Apple')" class="tab-btn px-6 py-2 rounded-full border border-slate-700 text-sm whitespace-nowrap bg-slate-800">Apple</button>
                <button onclick="setCategory('Canva')" class="tab-btn px-6 py-2 rounded-full border border-slate-700 text-sm whitespace-nowrap bg-slate-800">Canva</button>
                <button onclick="setCategory('CapCut')" class="tab-btn px-6 py-2 rounded-full border border-slate-700 text-sm whitespace-nowrap bg-slate-800">CapCut</button>
                <button onclick="setCategory('Apps')" class="tab-btn px-6 py-2 rounded-full border border-slate-700 text-sm whitespace-nowrap bg-slate-800">Apps</button>
                <button onclick="setCategory('SMM')" class="tab-btn px-6 py-2 rounded-full border border-slate-700 text-sm whitespace-nowrap bg-slate-800">SMM</button>
                <button onclick="setCategory('AI')" class="tab-btn px-6 py-2 rounded-full border border-slate-700 text-sm whitespace-nowrap bg-slate-800">AI</button>
                <button onclick="setCategory('Viu')" class="tab-btn px-6 py-2 rounded-full border border-slate-700 text-sm whitespace-nowrap bg-slate-800">Viu</button>
                <button onclick="setCategory('Spotify')" class="tab-btn px-6 py-2 rounded-full border border-slate-700 text-sm whitespace-nowrap bg-slate-800">Spotify</button>
            </div>
        </div>

        <div id="productGrid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 max-w-6xl mx-auto"></div>
    </div>

    <script>
        // --- MASUKKAN URL WEB APP GOOGLE SHEETS ANDA DI SINI ---
        const SHEET_API_URL = "https://script.google.com/macros/s/AKfycbya5auCKLoaiidDwXlwIa0KZ-yFrOjjnZXJIQl9ok6Tid673RAlcr2-nelP3mLatLKu/exec"; 
        const MY_PHONE_NUMBER = "6282175939107";
        
        let allProducts = [];
        let currentCategory = 'All';

        async function fetchProducts() {
            try {
                const response = await fetch(SHEET_API_URL);
                allProducts = await response.json();
                // Urutkan A-Z
                allProducts.sort((a, b) => (a.name || "").localeCompare(b.name || ""));
                filterProducts();
                document.getElementById('loadingStatus').innerText = "âœ… Server Terkoneksi";
            } catch (error) {
                document.getElementById('loadingStatus').innerText = "âŒ Gangguan Koneksi";
            }
        }

        function setCategory(cat) {
            currentCategory = cat;
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('tab-active');
                if(btn.innerText.toLowerCase() === (cat === 'All' ? 'semua' : cat.toLowerCase())) btn.classList.add('tab-active');
            });
            filterProducts();
        }

        function filterProducts() {
            const searchTerm = document.getElementById('searchInput').value.toLowerCase();
            const filtered = allProducts.filter(p => {
                // Perbaikan Filter: Menghilangkan spasi dan mengabaikan huruf besar/kecil
                const pCat = (p.category || "").toString().trim().toLowerCase();
                const targetCat = currentCategory.toLowerCase();
                const matchCat = currentCategory === 'All' || pCat === targetCat;
                const matchSearch = (p.name || "").toLowerCase().includes(searchTerm);
                return matchCat && matchSearch;
            });
            renderProducts(filtered);
        }

        function renderProducts(products) {
            const pGrid = document.getElementById('productGrid');
            pGrid.innerHTML = '';

            if (products.length === 0) {
                pGrid.innerHTML = `<div class="col-span-full text-center py-20 text-slate-500 italic">Layanan ${currentCategory} belum tersedia...</div>`;
                return;
            }

            products.forEach(p => {
                const isReady = p.status && p.status.toLowerCase() === 'ready';
                
                // --- PERBAIKAN LOGO [object Object] ---
                let iconContent = '';
                let rawIcon = p.icon;
                if (typeof rawIcon === 'object' || !rawIcon) {
                    iconContent = `<div class="text-5xl">ğŸ’</div>`;
                } else {
                    let iconStr = String(rawIcon).trim();
                    if (iconStr.startsWith('http')) {
                        iconContent = `<img src="${iconStr}" class="w-16 h-16 object-contain rounded-lg" onerror="this.src='https://cdn-icons-png.flaticon.com/512/679/679821.png';">`;
                    } else {
                        iconContent = `<div class="text-5xl">${iconStr}</div>`;
                    }
                }

               // --- LOGIKA PESAN WHATSAPP PINTAR ---
const tanggal = new Date().toLocaleDateString('id-ID', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' });
const waktu = new Date().toLocaleTimeString('id-ID');

// Cek apakah produk ini termasuk kategori Paket Data
const isPaketData = (p.category || "").toString().trim().toLowerCase() === 'paketdata';

let textPesan = "";

if (isPaketData) {
    // Jika kategori Paket Data, tambahkan baris Nomor HP
    textPesan = `ğŸ›’ *FORMULIR PESANAN - SYURASTORE*\n` +
                `â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n\n` +
                `ğŸ“¦ *RINCIAN PAKET DATA:*\n` +
                `â€¢ *Produk:* ${p.name}\n` +
                `â€¢ *Ket:* ${p.desc || '-'}\n` +
                `â€¢ *Harga:* Rp ${p.price}\n\n` +
                `ğŸ“± *DATA TUJUAN:*\n` +
                `â€¢ *Nomor HP:* (Ketik Nomor HP Anda di sini)\n\n` +
                `â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n\n` +
                `Halo Admin, saya ingin membeli paket data di atas. Mohon segera diproses ke nomor tersebut ya! ğŸ™`;
} else {
    // Jika produk premium biasa (YouTube/Netflix/dll)
    textPesan = `ğŸ›’ *PESANAN BARU - SYURASTORE* ğŸ›’\n` +
                `â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n\n` +
                `ğŸ“¦ *RINCIAN LAYANAN:*\n` +
                `â€¢ *Produk:* ${p.name}\n` +
                `â€¢ *Ket:* ${p.desc || '-'}\n` +
                `â€¢ *Harga:* Rp ${p.price}\n\n` +
                `ğŸ“… *WAKTU TRANSAKSI:*\n` +
                `â€¢ ${tanggal} (${waktu} WIB)\n\n` +
                `â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n\n` +
                `Halo Admin, saya ingin memesan produk di atas. Mohon instruksi pembayaran selanjutnya ya! ğŸ™`;
}

const waMessage = encodeURIComponent(textPesan);

                pGrid.innerHTML += `
                    <div class="glass-card p-8 rounded-[2.5rem] flex flex-col h-full ${!isReady ? 'opacity-60' : ''}">
                        <div class="flex justify-between items-start mb-6">
                            <div class="h-16 flex items-center">${iconContent}</div>
                            <span class="${isReady ? 'status-ready' : 'status-kosong'}">${isReady ? 'STOK TERSEDIA' : 'STOK HABIS'}</span>
                        </div>
                        <h3 class="text-2xl font-bold mb-1">${p.name}</h3>
                        <p class="text-[10px] text-primary font-bold uppercase tracking-widest mb-4">${p.category || 'Premium'}</p>
                        <p class="text-slate-400 text-sm mb-8 flex-grow leading-relaxed italic border-l-2 border-primary/30 pl-3">${p.desc || 'Garansi Terjamin'}</p>
                        <div class="flex justify-between items-center pt-6 border-t border-slate-700/50">
                            <div>
                                <p class="text-[10px] text-slate-500 font-bold uppercase">Harga Nett</p>
                                <span class="text-2xl font-black text-primary">${p.price}</span>
                            </div>
                            ${isReady ? 
                                `<a href="https://wa.me/${MY_PHONE_NUMBER}?text=${waMessage}" target="_blank" class="bg-primary text-slate-900 px-6 py-3 rounded-2xl font-bold shadow-lg hover:scale-105 transition-all">Pesan Sekarang</a>` : 
                                `<button disabled class="bg-slate-700 text-slate-500 px-6 py-3 rounded-2xl font-bold cursor-not-allowed uppercase text-[10px]">Layanan Habis</button>`
                            }
                        </div>
                    </div>`;
            });
        }
        window.onload = fetchProducts;
    </script>
</body>
</html>
